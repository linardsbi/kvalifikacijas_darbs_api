extends ../layout

block content
  .page-header
    h3 Dashboard
  input(type="hidden", name="apiToken" id="apiToken" value=user.apiKey)
  .page-body
    .device-overview
      .buttons
        button.btn.btn-default.graph-button Graph view
        button.btn.btn-default.device-edit Properties
        button.close x
      .data

      .graph
        .overlay
          .loading-bar
          span Loading...

    .controller-page
      each controller in controllers
        div.controller(id= controller.machine_name)
          .info
            .status.disconnected
            .controller-name= controller.name
          .wrapper
            .controller-machine-name= controller.machine_name
            .controller-devices
              .device-new Add device
              each device in controller.devices
                .device= device.name

  include ../partials/modals/device/new
  include ../partials/modals/device/edit
  script(src="https://code.highcharts.com/stock/modules/exporting.js")
  script(src="https://code.highcharts.com/highcharts.src.js")
  script(src="./js/dashboard/dashboard.js")
  script(src="./js/dashboard/charts.js")


  